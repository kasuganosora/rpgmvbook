# 从零开发 RPG 游戏引擎

## 前言：这个栏目讲什么？

你有没有想过，像《最终幻想》、《勇者斗恶龙》这样的经典 RPG 游戏是怎么做出来的？

这个栏目会带你从零开始，一步步实现一个**简化版的 RPG 游戏引擎**。我们会参考 RPG Maker MV 的设计思路，但不会照抄代码，而是教你**理解原理、掌握方法**。

**学完你能得到什么？**
- 理解游戏引擎的核心架构
- 掌握 2D 游戏开发的关键技术
- 能够自己动手实现一个可玩的 RPG Demo
- 为学习 Unity、Godot 等商业引擎打下基础

**需要什么基础？**
- 会写基本的 JavaScript（变量、函数、循环、对象）
- 有耐心，这是一个循序渐进的过程
- 不需要任何游戏开发经验

---

## 目录

### 第一部分：理解游戏引擎的本质

1. [什么是游戏引擎？](./01-what-is-engine.md)
   - 游戏引擎 vs 游戏的区别
   - 为什么需要游戏引擎
   - RPG 游戏引擎的核心需求

2. [游戏主循环](./02-game-loop.md)
   - 游戏是如何"动"起来的
   - 60 FPS 是什么意思
   - 实现你的第一个游戏循环

### 第二部分：渲染系统

3. [画布与坐标系统](./03-canvas-coordinates.md)
   - Canvas 是什么
   - 2D 坐标系统
   - 为什么要用"瓦片"来构建世界

4. [瓦片地图系统](./04-tilemap.md)
   - 什么是瓦片地图
   - 为什么 RPG 用瓦片而不是一张大图
   - 实现简单的地图渲染

5. [精灵与动画](./05-sprite-animation.md)
   - 什么是精灵（Sprite）
   - 帧动画原理
   - 实现角色行走动画

### 第三部分：游戏世界

6. [游戏对象系统](./06-game-objects.md)
   - 什么是游戏对象
   - 玩家、NPC、物品的共同点
   - 实现基础的 Entity 类

7. [碰撞检测](./07-collision.md)
   - 为什么要检测碰撞
   - 矩形碰撞原理
   - 实现角色与墙壁的碰撞

8. [地图与场景](./08-map-scene.md)
   - 地图数据的结构
   - 多地图切换
   - 实现场景管理器

### 第四部分：交互系统

9. [输入处理](./09-input.md)
   - 键盘输入的获取
   - 状态机：按下、持续、释放
   - 实现角色移动控制

10. [事件系统](./10-event-system.md)
    - 什么是游戏事件
    - 触发器与条件
    - 实现 NPC 对话

11. [用户界面](./11-ui-system.md)
    - UI 在游戏中的作用
    - 窗口与按钮
    - 实现对话框系统

### 第五部分：游戏逻辑

12. [角色数据系统](./12-character-data.md)
    - HP、MP、攻击力等属性
    - 角色成长系统
    - 实现数据存储

13. [物品与背包](./13-inventory.md)
    - 物品的数据结构
    - 背包管理
    - 使用物品的效果

14. [战斗系统](./14-battle.md)
    - 回合制战斗原理
    - 伤害计算公式
    - 实现简单的战斗

### 第六部分：保存与加载

15. [存档系统](./15-save-load.md)
    - 游戏状态序列化
    - 本地存储方案
    - 实现存档功能

---

## 学习路线图

```
第一部分：理解引擎     ──→   打下理论基础
         │
         ▼
第二部分：渲染系统     ──→   让画面显示出来
         │
         ▼
第三部分：游戏世界     ──→   构建游戏空间
         │
         ▼
第四部分：交互系统     ──→   让玩家能操作
         │
         ▼
第五部分：游戏逻辑     ──→   RPG 核心玩法
         │
         ▼
第六部分：保存加载     ──→   完整游戏体验
```

---

## 学习建议

### 不要跳章节

每一章都建立在前一章的基础上。如果你跳过了"游戏循环"，后面的"动画"章节你就看不懂。

### 动手写代码

光看不练是学不会的。每章都有代码示例，请务必自己敲一遍，运行看看效果。

### 修改和实验

看完示例后，试着修改参数，看看会发生什么：
- 把角色移动速度改成 10 会怎样？
- 把地图瓦片大小改成 16×16 会怎样？
- 碰撞检测改成圆形会怎样？

### 遇到问题怎么办？

1. **代码报错**：检查拼写、标点符号（中英文）、变量名
2. **效果不对**：用 `console.log()` 打印中间值
3. **完全不懂**：跳过这章，看后面的章节，有时候后面会更易懂

---

## 开发环境准备

你需要：
1. **代码编辑器**：VS Code（免费，推荐）
2. **浏览器**：Chrome 或 Firefox
3. **本地服务器**：可以用 VS Code 的 Live Server 插件

### 项目结构

```
my-rpg-engine/
├── index.html      # 入口文件
├── css/
│   └── style.css   # 样式
├── js/
│   ├── main.js     # 主程序
│   ├── engine/     # 引擎核心
│   │   ├── Game.js
│   │   ├── Renderer.js
│   │   └── Input.js
│   └── game/       # 游戏逻辑
│       ├── Player.js
│       ├── Map.js
│       └── NPC.js
└── assets/         # 资源文件
    ├── images/
    └── audio/
```

### 第一个 HTML 文件

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>我的第一个 RPG</title>
    <style>
        body {
            margin: 0;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            border: 2px solid #fff;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="816" height="624"></canvas>
    <script src="js/main.js"></script>
</body>
</html>
```

准备好了吗？让我们从第一章开始！
